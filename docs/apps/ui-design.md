# フロントエンド UI デザインガイド（shadcn/ui）

このドキュメントは、`apps/frontend` における UI 設計・実装の基準を定義します。  
UI フレームワークは `shadcn/ui` を利用し、Tailwind CSS のブレークポイントに基づいてレスポンシブ対応を行います。

## 基本方針

- UI は `components/ui/` の shadcn コンポーネントを基礎として構築する。
- レイアウト・スタイルは `Tailwind CSS + shadcn/ui` を原則とし、任意の CSS-in-JS や独自 CSS の導入は特殊理由がある場合のみ許容する。
- 画面単位の実装は `app/`、再利用可能な UI ロジックは `features/` に配置する。
- メインターゲットは `xl`（1280-1535px）とし、このサイズで主要機能が無理なく使えることを最優先にする。
- モバイルは機能削減ではなく、情報の優先順位を整理したシングルパネル設計にする。

## Tailwind ブレークポイント定義

| ブレークポイント | 範囲（px） | 用途                                       |
| ---------------- | ---------- | ------------------------------------------ |
| なし             | 0-639      | モバイル利用者                             |
| `sm`             | 640-767    | レスポンシブ対応（ウィンドウサイズ変更時） |
| `md`             | 768-1023   | レスポンシブ対応（ウィンドウサイズ変更時） |
| `lg`             | 1024-1279  | レスポンシブ対応（ウィンドウサイズ変更時） |
| `xl`             | 1280-1535  | WindowsノートPC利用者（メインターゲット）  |
| `2xl`            | 1536以上   | フルHD描画端末利用者                       |

## レイアウト要件

### `xl`（1280-1535px / メインターゲット）

- Windows 13-15インチノートPC利用を前提とする。
- 実効 viewport `1280x580` を想定し、主要操作が初期表示で完結する情報量に調整する。
- 高さ制約を意識して、不要な固定ヘッダーや過剰な余白を避ける。

### `2xl`（1536px以上）

- `xl` の情報設計を維持しつつ、余白とパネル幅を拡張して可読性を上げる。
- 横幅の拡張は `max-w-*` と `grid-cols-*` で段階的に行い、文字行長が伸びすぎないように制御する。

### モバイル（0-639px）

- シングルパネルレイアウトを基本とする。
- タップ対象は十分なサイズを確保し、フォーム要素・主要ボタンを縦方向に配置する。
- 横スクロールが発生しない設計を必須とする。

### `sm` `md` `lg`（640-1279px）

- 中間幅ではレイアウト崩れ防止を優先する。
- サイドメニューはアイコン化またはハンバーガーメニュー化する。
- コンテンツ領域を優先し、補助情報は折りたたみ・タブ化で整理する。

## shadcn/ui 利用ルール

- まず `components/ui/` の既存コンポーネントを再利用する。
- 新規 UI 追加時は shadcn の構造を維持し、独自クラスは最小限にする。
- フォームは `Form`, `FormField`, `FormMessage` を基準に統一する。
- 破壊的操作は `AlertDialog`、選択式入力は `Select`/`Combobox` など、用途に沿ったコンポーネントを選択する。

## カラー運用ルール

- カラーは shadcn の CSS 変数（`--background`, `--foreground`, `--primary` など）と、Tailwind のセマンティックカラー（`bg-card`, `text-muted-foreground` など）を優先する。
- `text-*`, `bg-*`, `border-*` は意味ベースで選び、画面ごとの独自色運用を避ける。
- 独自色を導入する場合は `dark:` スタイルを必ずセットで定義し、ライト/ダーク双方で可読性を担保する。

## 実装ガイド（レスポンシブ）

- モバイルファーストでクラスを記述し、必要な差分のみ `sm:` 以上で上書きする。
- 主要コンテナは `w-full` + `max-w-*` で幅を制御する。
- グリッド切り替えは以下を基準にする。
  - `grid-cols-1`（モバイル）
  - `lg:grid-cols-2`（中間〜ノート）
  - `2xl:grid-cols-3`（大型画面で拡張が有効な場合のみ）
- 間隔は `gap-*` と `space-y-*` を一貫して使用し、固定ピクセル依存を避ける。

```tsx
<section className="mx-auto w-full max-w-screen-2xl px-4 sm:px-6 xl:px-8">
  <div className="grid grid-cols-1 gap-4 lg:grid-cols-2 2xl:gap-6">
    <Card className="min-h-55" />
    <Card className="min-h-55" />
  </div>
</section>
```

## UX・アクセシビリティ

- 主要操作はキーボードで到達可能にする（Tab 移動順、Enter/Space 操作）。
- コントラスト不足を避け、`text-muted-foreground` の使いすぎに注意する。
- エラーは表示位置を統一し、入力フィールド直下で意味が伝わる文言を表示する。
- ローディング時はボタン無効化と視覚フィードバックを必ず入れる。

## Motion の扱い

- アニメーションは `motion` ライブラリで統一し、`import { motion } from "motion/react"` を利用する。
- アニメーションは主要セクションに限定し、`motion` コンポーネントに集約する。
- `opacity` / `x` / `y` / `scale` を中心とした軽量トランジションを基本とする。
- 遷移時間は短く保ち、操作阻害につながる演出は避ける。
- 装飾目的の常時アニメーションは原則導入しない。
- `prefers-reduced-motion` を尊重し、`useReducedMotion` でアニメーションを抑制できる実装にする。

```tsx
import { motion, useReducedMotion } from "motion/react";

const Example = () => {
  const shouldReduceMotion = useReducedMotion();

  return (
    <motion.div
      initial={{ opacity: 0, y: shouldReduceMotion ? 0 : 12 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{ duration: shouldReduceMotion ? 0 : 0.24 }}
    />
  );
};
```

## アイコン運用ルール

- アイコンは `lucide-react` を標準とする。
- ボタン内アイコンは `h-4 w-4` を基本サイズに統一する。
- テキストと併用する場合は `gap-2` 程度で余白を揃え、意味のない装飾アイコンを増やさない。

## レビュー観点（UI変更PRチェック）

- `xl`（1280-1535px）で主要機能が初期表示に収まっているか。
- モバイルでシングルパネルかつ横スクロールなしを満たしているか。
- `sm` `md` `lg` の中間幅でナビゲーションが破綻していないか。
- shadcn コンポーネント再利用が優先され、独自実装が過剰でないか。
- カラー指定がセマンティックトークン中心になっているか（独自色は `dark:` とセットか）。
- アイコンが `lucide-react` で統一され、ボタン内サイズが `h-4 w-4` で揃っているか。
- フォームのエラー表示・ローディング状態・操作不能状態が実装されているか。

## 関連ドキュメント

- `docs/apps/form-validation.md`
- `docs/apps/state.md`
- `docs/apps/i18n.md`
